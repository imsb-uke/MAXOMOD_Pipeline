# Autogenerated file with ./create-dvc-yaml.py. DO NOT EDIT
stages:
  cluster_profiler_compare:
    do:
      cmd: ./docker-wrapper.sh ./src/integration/24-clusterprofiler.R --dataset-name
        ${key}
      deps:
      - ./src/integration/24-clusterprofiler.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/get_settings.R
      - ${item.settings.inputs}
      outs:
      - ${item.settings.output_directory}
      params:
      - integration.cluster_profiler_compare.default_settings
      - integration.cluster_profiler_compare.stages.${key}.settings
    foreach: ${integration.cluster_profiler_compare.stages}
  das:
    do:
      cmd: ./docker-wrapper.sh src/rnaseq/DAS_Analysis/DAS.sh --dataset-name ${key}
        --input_dir ${item.settings.input_directory} --gtf ${item.settings.gtf} --out_dir
        ${item.settings.output_directory}
      deps:
      - ./src/rnaseq/DAS_Analysis/DAS.sh
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/get_settings.R
      - ${item.settings.input_directory}
      - ${item.settings.data_input}
      - ${item.settings.gtf}
      outs:
      - ${item.settings.output_directory}
      params:
      - splicing_analysis_das.das.stages.${key}.settings
    foreach: ${splicing_analysis_das.das.stages}
  das_decompress_anno_file:
    do:
      cmd: zcat ${item.inputs}  > ${item.output}
      deps:
      - ${item.inputs}
      outs:
      - ${item.output}:
          cache: false
    foreach:
      human:
        inputs: database/align-references/hsapiens/gencode.v37.annotation.gtf.gz
        output: database/align-references/hsapiens/gencode.v37.annotation.gtf
      mouse:
        inputs: database/align-references/mmusculus/gencode.vM26.annotation.gtf.gz
        output: database/align-references/mmusculus/gencode.vM26.annotation.gtf
  das_ora:
    do:
      cmd: ./docker-wrapper.sh ./src/rnaseq/ORA/das_ora.R --dataset-name ${key}
      deps:
      - ./src/rnaseq/ORA/das_ora.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/get_settings.R
      - ${item.settings.input}
      outs:
      - ${item.settings.output_directory}
      params:
      - splicing_analysis_das.das_ora.stages.${key}.settings
    foreach: ${splicing_analysis_das.das_ora.stages}
  das_prep:
    do:
      cmd: ./docker-wrapper.sh ./src/rnaseq/DAS_Analysis/das_prep.R --dataset-name
        ${key}
      deps:
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/rnaseq/DAS_Analysis/das_prep.R
      - ${item.settings.input_directory}
      - ${item.settings.gtf}
      - ${item.settings.nextflow}
      - ${item.settings.annotation}
      outs:
      - ${item.settings.output_directory}
      params:
      - splicing_analysis_das.das_prep.stages.${key}.settings
    foreach: ${splicing_analysis_das.das_prep.stages}
  fastqscreen:
    do:
      cmd: ./docker-wrapper.sh fastq_screen --subset 0 --tag --outdir ${item.output}
        --conf ${rnaseq.fastqscreen.default_settings.conf} ${item.inputs}
      deps:
      - ${item.inputs}
      - ${rnaseq.fastqscreen.default_settings.conf}
      outs:
      - ${item.output}
    foreach: ${rnaseq.fastqscreen.stages}
  generate_genesets_pathwayscoring:
    cmd: ./docker-wrapper.sh python ./src/integration/generate_genesets.py
    deps:
    - src/integration/generate_genesets.py
    - database/genesets/raw_lists/
    - database/uniprot/uniprot_HUMAN_9606_idmapping_selected.tab.gz
    - database/biomaRt/ensembl_to_symbol_human.csv
    - database/uniprot/uniprot_MOUSE_10090_idmapping_selected.tab.gz
    - human_rat_mouse_protein_gene_link.csv.gz
    outs:
    - database/genesets/all_genesets.json.gz
  map_de_genes:
    do:
      cmd: ./docker-wrapper.sh ./src/integration/22-map_de.py --stage ${key} --key
        integration --method map_de_genes
      deps:
      - ./src/integration/22-map_de.py
      - ${item.inputs.de}
      - ${item.inputs.mapping}
      - ${integration.map_de_genes.default_settings.species_mapping}
      outs:
      - ${item.output}
      params:
      - integration.map_de_genes.default_settings
      - integration.map_de_genes.stages.${key}.settings
    foreach: ${integration.map_de_genes.stages}
  merge_all_pathways:
    cmd: ./docker-wrapper.sh ./src/integration/merge_pathways.py
    deps:
    - src/integration/merge_pathways.py
    - results/DTU/C9orf72-mouse/ORA
    - results/DTU/FUS-mouse/ORA
    - results/DTU/SOD1-mouse/ORA
    - results/DTU/TDP43-mouse/ORA
    - results/DTU/human/ORA
    - results/DAS/C9orf72-mouse/ORA
    - results/DAS/FUS-mouse/ORA
    - results/DAS/SOD1-mouse/ORA
    - results/DAS/TDP43-mouse/ORA
    - results/DAS/human/ORA
    - results/WGCNA/c9orf72_results
    - results/WGCNA/fus_results
    - results/WGCNA/human_results
    - results/WGCNA/sod1_results
    - results/WGCNA/tdp43_results
    - results/WGCNA_rnaseq/c9orf72_results
    - results/WGCNA_rnaseq/fus_results
    - results/WGCNA_rnaseq/human_results
    - results/WGCNA_rnaseq/sod1_results
    - results/WGCNA_rnaseq/tdp43_results
    - datasets/consortium/human-datasets/02_organized_data/rnaseq/gene-enrichment/gene_set_enrichment/
    - datasets/consortium/SOD1-mouse/02_organized_data/rnaseq/gene-enrichment/gene_set_enrichment/
    - datasets/consortium/FUS-mouse/02_organized_data/rnaseq/gene-enrichment/gene_set_enrichment/
    - datasets/consortium/C9orf72-mouse/02_organized_data/rnaseq/gene-enrichment/gene_set_enrichment/
    - datasets/consortium/TDP43-mouse/02_organized_data/rnaseq/gene-enrichment/gene_set_enrichment/
    - datasets/consortium/human-datasets/02_organized_data/proteomics/gsea_enrichment/gsea_results/
    - datasets/consortium/SOD1-mouse/02_organized_data/proteomics/gsea_enrichment/gsea_results/
    - datasets/consortium/FUS-mouse/02_organized_data/proteomics/gsea_enrichment/gsea_results/
    - datasets/consortium/C9orf72-mouse/02_organized_data/proteomics/gsea_enrichment/gsea_results/
    - datasets/consortium/TDP43-mouse/02_organized_data/proteomics/gsea_enrichment/gsea_results/
    - datasets/consortium/human-datasets/02_organized_data/rnaseq/genetonic/
    - datasets/consortium/SOD1-mouse/02_organized_data/rnaseq/genetonic/
    - datasets/consortium/FUS-mouse/02_organized_data/rnaseq/genetonic/
    - datasets/consortium/C9orf72-mouse/02_organized_data/rnaseq/genetonic/
    - datasets/consortium/TDP43-mouse/02_organized_data/rnaseq/genetonic/
    outs:
    - results/integration/pathways/all_pathways.csv
  merge_de:
    do:
      cmd: ./docker-wrapper.sh ./src/integration/23-merge-de-lists.py --stage ${key}
        --key integration --method cluster_profiler_merge
      deps:
      - ${item.inputs}
      outs:
      - ${item.output}:
          cache: false
      params:
      - integration.cluster_profiler_merge.stages.${key}.settings
    foreach: ${integration.cluster_profiler_merge.stages}
  mofa_tp2sm:
    do:
      cmd: MX_DOCKERIMAGE="ghcr.io/imsb-uke/maxomod_pipeline-mofa" ./docker-wrapper.sh
        Rscript src/shared/integrative/mofa_analysis.r --dataset-name ${key} --mofa-type
        mofa_tp2sm
      deps:
      - src/shared/integrative/mofa_analysis.r
      - ${item.omics.transcriptomics.annotation_file}
      - ${item.omics.transcriptomics.expression_file}
      - ${item.omics.proteomics.annotation_file}
      - ${item.omics.proteomics.expression_file}
      - ${item.omics.srna_mature.annotation_file}
      - ${item.omics.srna_mature.keep_file}
      - ${item.omics.srna_mature.expression_file}
      - ${item.omics.metabolomics.annotation_file}
      - ${item.omics.metabolomics.expression_file}
      - ${item.omics.phosphoproteomics.annotation_file}
      - ${item.omics.phosphoproteomics.expression_file}
      outs:
      - ${item.out_dir}
      params:
      - mofa_tp2sm.stages.${key}.organism
      - mofa_tp2sm.stages.${key}.sex_selection
      - mofa_tp2sm.stages.${key}.factor_combinations
      - mofa_tp2sm.stages.${key}.model_training
      - mofa_tp2sm.stages.${key}.topN_byVar
    foreach: ${mofa_tp2sm.stages}
  mofa_tp2sm_c9:
    do:
      cmd: MX_DOCKERIMAGE="ghcr.io/imsb-uke/maxomod_pipeline-mofa" ./docker-wrapper.sh
        Rscript src/shared/integrative/mofa_analysis.r --dataset-name ${key} --mofa-type
        mofa_tp2sm_c9
      deps:
      - src/shared/integrative/mofa_analysis.r
      - ${item.omics.transcriptomics.annotation_file}
      - ${item.omics.transcriptomics.expression_file}
      - ${item.omics.proteomics.annotation_file}
      - ${item.omics.proteomics.expression_file}
      - ${item.omics.srna_mature.annotation_file}
      - ${item.omics.srna_mature.keep_file}
      - ${item.omics.srna_mature.expression_file}
      - ${item.omics.metabolomics.annotation_file}
      - ${item.omics.metabolomics.sample_mapping}
      - ${item.omics.metabolomics.expression_file}
      - ${item.omics.phosphoproteomics.annotation_file}
      - ${item.omics.phosphoproteomics.sample_matching}
      - ${item.omics.phosphoproteomics.expression_file}
      outs:
      - ${item.out_dir}
      params:
      - mofa_tp2sm_c9.stages.${key}.organism
      - mofa_tp2sm_c9.stages.${key}.sex_selection
      - mofa_tp2sm_c9.stages.${key}.factor_combinations
      - mofa_tp2sm_c9.stages.${key}.model_training
      - mofa_tp2sm_c9.stages.${key}.topN_byVar
    foreach: ${mofa_tp2sm_c9.stages}
  mofa_tp2sm_fus:
    do:
      cmd: MX_DOCKERIMAGE="ghcr.io/imsb-uke/maxomod_pipeline-mofa" ./docker-wrapper.sh
        Rscript src/shared/integrative/mofa_analysis.r --dataset-name ${key} --mofa-type
        mofa_tp2sm_fus
      deps:
      - src/shared/integrative/mofa_analysis.r
      - ${item.omics.transcriptomics.annotation_file}
      - ${item.omics.transcriptomics.expression_file}
      - ${item.omics.proteomics.annotation_file}
      - ${item.omics.proteomics.expression_file}
      - ${item.omics.srna_mature.annotation_file}
      - ${item.omics.srna_mature.keep_file}
      - ${item.omics.srna_mature.expression_file}
      - ${item.omics.metabolomics.annotation_file}
      - ${item.omics.metabolomics.sample_mapping}
      - ${item.omics.metabolomics.expression_file}
      - ${item.omics.phosphoproteomics.annotation_file}
      - ${item.omics.phosphoproteomics.expression_file}
      outs:
      - ${item.out_dir}
      params:
      - mofa_tp2sm_fus.stages.${key}.organism
      - mofa_tp2sm_fus.stages.${key}.sex_selection
      - mofa_tp2sm_fus.stages.${key}.factor_combinations
      - mofa_tp2sm_fus.stages.${key}.model_training
      - mofa_tp2sm_fus.stages.${key}.topN_byVar
    foreach: ${mofa_tp2sm_fus.stages}
  mofa_tps2:
    do:
      cmd: MX_DOCKERIMAGE="ghcr.io/imsb-uke/maxomod_pipeline-mofa" ./docker-wrapper.sh
        Rscript src/shared/integrative/mofa_analysis.r --dataset-name ${key} --mofa-type
        mofa_tps2
      deps:
      - src/shared/integrative/mofa_analysis.r
      - ${item.omics.transcriptomics.annotation_file}
      - ${item.omics.transcriptomics.expression_file}
      - ${item.omics.proteomics.annotation_file}
      - ${item.omics.proteomics.expression_file}
      - ${item.omics.srna_mature.annotation_file}
      - ${item.omics.srna_mature.keep_file}
      - ${item.omics.srna_mature.expression_file}
      - ${item.omics.srna_hairpin.annotation_file}
      - ${item.omics.srna_hairpin.keep_file}
      - ${item.omics.srna_hairpin.expression_file}
      outs:
      - ${item.out_dir}
      params:
      - mofa_tps2.stages.${key}.organism
      - mofa_tps2.stages.${key}.sex_selection
      - mofa_tps2.stages.${key}.factor_combinations
      - mofa_tps2.stages.${key}.model_training
      - mofa_tps2.stages.${key}.topN_byVar
    foreach: ${mofa_tps2.stages}
  mofa_tpsm_c9:
    do:
      cmd: MX_DOCKERIMAGE="ghcr.io/imsb-uke/maxomod_pipeline-mofa" ./docker-wrapper.sh
        Rscript src/shared/integrative/mofa_analysis.r --dataset-name ${key} --mofa-type
        mofa_tpsm_c9
      deps:
      - src/shared/integrative/mofa_analysis.r
      - ${item.omics.transcriptomics.annotation_file}
      - ${item.omics.transcriptomics.expression_file}
      - ${item.omics.proteomics.annotation_file}
      - ${item.omics.proteomics.expression_file}
      - ${item.omics.srna_mature.annotation_file}
      - ${item.omics.srna_mature.keep_file}
      - ${item.omics.srna_mature.expression_file}
      - ${item.omics.metabolomics.annotation_file}
      - ${item.omics.metabolomics.sample_mapping}
      - ${item.omics.metabolomics.expression_file}
      outs:
      - ${item.out_dir}
      params:
      - mofa_tpsm_c9.stages.${key}.organism
      - mofa_tpsm_c9.stages.${key}.sex_selection
      - mofa_tpsm_c9.stages.${key}.factor_combinations
      - mofa_tpsm_c9.stages.${key}.model_training
      - mofa_tpsm_c9.stages.${key}.topN_byVar
    foreach: ${mofa_tpsm_c9.stages}
  ora_dtu:
    do:
      cmd: ./docker-wrapper.sh ./src/rnaseq/ORA/dtu_ora.R --dataset-name ${key}
      deps:
      - ./src/rnaseq/ORA/dtu_ora.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/get_settings.R
      - ${item.settings.inputdex}
      - ${item.settings.inputdrim}
      outs:
      - ${item.settings.output_directory}
      params:
      - splicing_analysis.ora_dtu.stages.${key}.settings
    foreach: ${splicing_analysis.ora_dtu.stages}
  pathway_scores_proteomics:
    do:
      cmd: ./docker-wrapper.sh python3 ./src/shared/score_pathways.py --stage ${key}
        --key integration --method pathway_scores_proteomics
      deps:
      - ./src/shared/score_pathways.py
      - ${item.inputs.expression}
      - ${item.inputs.genelists}
      outs:
      - ${item.output}.csv
      - ${item.output}.ncount.csv
      params:
      - integration.pathway_scores_proteomics.default_settings
      - integration.pathway_scores_proteomics.stages.${key}.settings
    foreach: ${integration.pathway_scores_proteomics.stages}
  pathway_scores_rnaseq:
    do:
      cmd: ./docker-wrapper.sh python3 ./src/shared/score_pathways.py --stage ${key}
        --key integration --method pathway_scores_rnaseq
      deps:
      - ./src/shared/score_pathways.py
      - ${item.inputs.expression}
      - ${item.inputs.genelists}
      outs:
      - ${item.output}.csv
      - ${item.output}.ncount.csv
      params:
      - integration.pathway_scores_rnaseq.default_settings
      - integration.pathway_scores_rnaseq.stages.${key}.settings
    foreach: ${integration.pathway_scores_rnaseq.stages}
  phosphoproteomics_deg:
    do:
      cmd: ./docker-wrapper.sh ./src/phosphoproteomics/30-deg.R --dataset-name ${key}
      deps:
      - ./src/phosphoproteomics/30-deg.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/cohort_to_factors.R
      - ./src/shared/R-helpers/limma_analysis.R
      - ${item.settings.cohort}
      - ${item.settings.intensity_mat_for_limma}
      outs:
      - ${item.settings.output_directory}
      params:
      - proteomics.deg.default_settings
      - proteomics.deg.stages.${key}.settings
    foreach: ${phosphoproteomics.deg.stages}
  phosphoproteomics_deg_boxplots:
    do:
      cmd: ./docker-wrapper.sh ./src/phosphoproteomics/47-boxplots_deg_results.py
        --stage ${key}
      deps:
      - ./src/phosphoproteomics/47-boxplots_deg_results.py
      - ${item.inputs.raw}
      - ${item.inputs.metadata}
      - ${item.inputs.degpath}
      outs:
      - ${item.output}
      params:
      - phosphoproteomics.deg_boxplots.default_settings
      - phosphoproteomics.deg_boxplots.stages.${key}.settings
    foreach: ${phosphoproteomics.deg_boxplots.stages}
  phosphoproteomics_deg_count:
    cmd: ./docker-wrapper.sh python ./src/phosphoproteomics/46-get_deg_counts.py
    deps:
    - ./src/phosphoproteomics/46-get_deg_counts.py
    - ${phosphoproteomics.deg_count.sod1_female}
    - ${phosphoproteomics.deg_count.tdp43_female}
    - ${phosphoproteomics.deg_count.c9_female}
    - ${phosphoproteomics.deg_count.fus_female}
    - ${phosphoproteomics.deg_count.sod1_male}
    - ${phosphoproteomics.deg_count.tdp43_male}
    - ${phosphoproteomics.deg_count.c9_male}
    - ${phosphoproteomics.deg_count.fus_male}
    metrics:
    - results/integration/phosphoproteomics/deg_counts.yaml
  phosphoproteomics_deg_digestion:
    do:
      cmd: ./docker-wrapper.sh ./src/phosphoproteomics/40-deg_digestion.R --dataset-name
        ${key}
      deps:
      - ./src/phosphoproteomics/40-deg_digestion.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/create_volcano_plot.R
      - ${item.settings.de_results_rds}
      outs:
      - ${item.settings.output_directory}
      params:
      - phosphoproteomics.deg_digestion.default_settings
      - phosphoproteomics.deg_digestion.stages.${key}.settings
    foreach: ${phosphoproteomics.deg_digestion.stages}
  phosphoproteomics_gsea_enrichment:
    do:
      cmd: ./docker-wrapper.sh ./src/phosphoproteomics/45-gsea_enrichment.R --dataset-name
        ${key}
      deps:
      - ./src/phosphoproteomics/45-gsea_enrichment.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/gseGO_memoise.R
      - ./src/shared/R-helpers/gseKEGG_memoise.R
      - ./src/shared/R-helpers/memoise_decorator.R
      - ${item.settings.uniprot_to_ensembl}
      - ${item.settings.de_results_rds}
      outs:
      - ${item.settings.output_directory}
      params:
      - phosphoproteomics.gsea_enrichment.default_settings
      - phosphoproteomics.gsea_enrichment.stages.${key}.settings
    foreach: ${phosphoproteomics.gsea_enrichment.stages}
  phosphoproteomics_organize_samples:
    do:
      cmd: ./docker-wrapper.sh ./src/phosphoproteomics/10-organize_samples.py --stage
        ${key}
      deps:
      - ./src/phosphoproteomics/10-organize_samples.py
      - ${item.inputs.cohort}
      - ${item.inputs.inputs}
      - ${item.inputs.samplesheet}
      outs:
      - ${item.output}/cohort_filtered.csv
      - ${item.output}/intensity_mat_filtered_imputed_log2transf_norm.csv
      params:
      - phosphoproteomics.organize_samples.default_settings
      - phosphoproteomics.organize_samples.stages.${key}.settings
    foreach: ${phosphoproteomics.organize_samples.stages}
  phosphoproteomics_prefiltering_pca:
    do:
      cmd: ./docker-wrapper.sh ./src/phosphoproteomics/20-prefiltering_pca.R --dataset-name
        ${key}
      deps:
      - ./src/phosphoproteomics/20-prefiltering_pca.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/get_top_n_variance.R
      - ./src/shared/R-helpers/pc_scores_loadings_plot.R
      - ./src/shared/R-helpers/pca_fit.R
      - ${item.settings.cohort}
      - ${item.settings.input_intensity}
      outs:
      - ${item.settings.output_directory}/pca
      - ${item.settings.output_directory}/intensity_mat_filtered_imputed_log2transf_norm.rds
      params:
      - phosphoproteomics.prefiltering_pca.default_settings
      - phosphoproteomics.prefiltering_pca.stages.${key}.settings
    foreach: ${phosphoproteomics.prefiltering_pca.stages}
  phosphoproteomics_string_ppi:
    do:
      cmd: ./docker-wrapper.sh ./src/phosphoproteomics/45-string_ppi.R --dataset-name
        ${key}
      deps:
      - ./src/phosphoproteomics/45-string_ppi.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ${item.settings.uniprot_to_string}
      - ${item.settings.de_result_thresholds_rds}
      - ${item.settings.string_ppi_file}
      outs:
      - ${item.settings.output_directory}
      params:
      - phosphoproteomics.string_ppi.default_settings
      - phosphoproteomics.string_ppi.stages.${key}.settings
    foreach: ${phosphoproteomics.string_ppi.stages}
  proteomics_additional_QC:
    do:
      cmd: ./docker-wrapper.sh ./src/proteomics/22-additional_QC.R --dataset-name
        ${key}
      deps:
      - ./src/proteomics/22-additional_QC.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ${item.settings.cohort}
      - ${item.settings.input_data}
      outs:
      - ${item.settings.output_directory}
      params:
      - proteomics.additional_QC.default_settings
      - proteomics.additional_QC.stages.${key}.settings
    foreach: ${proteomics.additional_QC.stages}
  proteomics_deg:
    do:
      cmd: ./docker-wrapper.sh ./src/proteomics/30-deg.R --dataset-name ${key}
      deps:
      - ./src/proteomics/30-deg.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/cohort_to_factors.R
      - ./src/shared/R-helpers/limma_analysis.R
      - ${item.settings.cohort}
      - ${item.settings.intensity_mat_for_limma}
      outs:
      - ${item.settings.output_directory}
      params:
      - proteomics.deg.default_settings
      - proteomics.deg.stages.${key}.settings
    foreach: ${proteomics.deg.stages}
  proteomics_deg_boxplots:
    do:
      cmd: ./docker-wrapper.sh ./src/proteomics/47-boxplots_deg_results.py --stage
        ${key}
      deps:
      - ./src/proteomics/47-boxplots_deg_results.py
      - ${item.inputs.raw}
      - ${item.inputs.metadata}
      - ${item.inputs.degpath}
      outs:
      - ${item.output}
      params:
      - proteomics.deg_boxplots.default_settings
      - proteomics.deg_boxplots.stages.${key}.settings
    foreach: ${proteomics.deg_boxplots.stages}
  proteomics_deg_count:
    cmd: ./docker-wrapper.sh python ./src/proteomics/46-get_deg_counts.py
    deps:
    - ./src/proteomics/46-get_deg_counts.py
    - ${proteomics.deg_count.sod1_female}
    - ${proteomics.deg_count.tdp43_female}
    - ${proteomics.deg_count.c9_female}
    - ${proteomics.deg_count.human_female}
    - ${proteomics.deg_count.fus_female}
    - ${proteomics.deg_count.human_csf_female}
    - ${proteomics.deg_count.sod1_male}
    - ${proteomics.deg_count.tdp43_male}
    - ${proteomics.deg_count.c9_male}
    - ${proteomics.deg_count.human_male}
    - ${proteomics.deg_count.fus_male}
    - ${proteomics.deg_count.human_csf_male}
    metrics:
    - results/integration/proteomics/deg_counts.yaml
  proteomics_deg_digestion:
    do:
      cmd: ./docker-wrapper.sh ./src/proteomics/40-deg_digestion.R --dataset-name
        ${key}
      deps:
      - ./src/proteomics/40-deg_digestion.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/create_volcano_plot.R
      - ${item.settings.de_results_rds}
      outs:
      - ${item.settings.output_directory}
      params:
      - proteomics.deg_digestion.default_settings
      - proteomics.deg_digestion.stages.${key}.settings
    foreach: ${proteomics.deg_digestion.stages}
  proteomics_download_string_ppi:
    cmd: ./src/proteomics/44-download-string-protein-protein-interactions.sh
    deps:
    - ./src/proteomics/44-download-string-protein-protein-interactions.sh
    outs:
    - database/stringdb/mouse.uniprot_2_string.2018.tsv.gz
    - database/stringdb/human.uniprot_2_string.2018.tsv.gz
    - database/stringdb/10090.protein.links.txt.gz
    - database/stringdb/9606.protein.links.txt.gz
  proteomics_ensemble_symbol_mappings_human:
    cmd: ./src/proteomics/35-download-ensembl-to-symbol-human.R
    deps:
    - ./src/proteomics/35-download-ensembl-to-symbol-human.R
    outs:
    - database/biomaRt/ensembl_to_symbol_human.csv
    - database/biomaRt/ensembl_to_symbol_human.rds
  proteomics_ensemble_symbol_mappings_mouse:
    cmd: ./src/proteomics/35-download-ensembl-to-symbol-mouse.R
    deps:
    - ./src/proteomics/35-download-ensembl-to-symbol-mouse.R
    outs:
    - database/biomaRt/ensembl_to_symbol_mouse.csv
    - database/biomaRt/ensembl_to_symbol_mouse.rds
  proteomics_gofigure:
    do:
      cmd: ./docker-wrapper.sh python3 src/shared/GoFigure/run_gofigure.py --key proteomics
        --method gofigure --stage ${key}
      deps:
      - ${item.inputs}
      - src/shared/GoFigure/gofigure.py
      - src/shared/GoFigure/run_gofigure.py
      - src/shared/GoFigure/data/
      outs:
      - ${item.outputs}
      params:
      - proteomics.gofigure.stages.${key}.settings.level
      - proteomics.gofigure.stages.${key}.settings.commandline
    foreach: ${proteomics.gofigure.stages}
  proteomics_gsea_enrichment:
    do:
      cmd: ./docker-wrapper.sh ./src/proteomics/45-gsea_enrichment.R --dataset-name
        ${key}
      deps:
      - ./src/proteomics/45-gsea_enrichment.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/gseGO_memoise.R
      - ./src/shared/R-helpers/gseKEGG_memoise.R
      - ./src/shared/R-helpers/memoise_decorator.R
      - ${item.settings.protein_annotations_rds}
      - ${item.settings.uniprot_to_ensembl}
      - ${item.settings.de_results_rds}
      outs:
      - ${item.settings.output_directory}
      params:
      - proteomics.gsea_enrichment.default_settings
      - proteomics.gsea_enrichment.stages.${key}.settings
    foreach: ${proteomics.gsea_enrichment.stages}
  proteomics_missing_values_analysis:
    cmd: ./docker-wrapper.sh ./src/proteomics/21-missing-values-analysis.R
    deps:
    - ./src/proteomics/21-missing-values-analysis.R
    - ./datasets/consortium/SOD1-mouse/02_organized_data/proteomics/organized/intensity.rds
    - ./datasets/consortium/TDP43-mouse/02_organized_data/proteomics/organized/intensity.rds
    - ./datasets/consortium/C9orf72-mouse/02_organized_data/proteomics/organized/intensity.rds
    - ./datasets/consortium/FUS-mouse/02_organized_data/proteomics/organized/intensity.rds
    - ./datasets/consortium/human-datasets/02_organized_data/proteomics/organized/intensity.rds
    - ./datasets/consortium/SOD1-mouse/02_organized_data/proteomics/prefiltering-pca/intensity_mat_filtered.rds
    - ./datasets/consortium/TDP43-mouse/02_organized_data/proteomics/prefiltering-pca/intensity_mat_filtered.rds
    - ./datasets/consortium/C9orf72-mouse/02_organized_data/proteomics/prefiltering-pca/intensity_mat_filtered.rds
    - ./datasets/consortium/FUS-mouse/02_organized_data/proteomics/prefiltering-pca/intensity_mat_filtered.rds
    - ./datasets/consortium/human-datasets/02_organized_data/proteomics/prefiltering-pca/intensity_mat_filtered.rds
    outs:
    - ./results/proteomics-missing-values/
  proteomics_nes_mapper:
    do:
      cmd: mkdir -p database/NES && zcat ${item} > database/NES/predicted_${key}.tmp
        && src/proteomics/NESmapper-1.0/NESmapper.pl -p src/proteomics/NESmapper-1.0/NES_profiles_trained.txt
        database/NES/predicted_${key}.tmp > database/NES/predicted_${key}.txt && rm
        database/NES/predicted_${key}.tmp
      deps:
      - ${item}
      - src/proteomics/NESmapper-1.0/NES_profiles_trained.txt
      - src/proteomics/NESmapper-1.0/NESmapper.pl
      outs:
      - database/NES/predicted_${key}.txt
    foreach:
      human: database/uniprot/human_proteome.fasta.gz
      mouse: database/uniprot/mouse_proteome.fasta.gz
  proteomics_organize_samples:
    do:
      cmd: ./docker-wrapper.sh ./src/proteomics/10-organize_samples.R --dataset-name
        ${key}
      deps:
      - ./src/proteomics/10-organize_samples.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ${item.settings.cohort}
      - ${item.settings.maxquant_input}
      - ${item.settings.rename_samples}
      outs:
      - ${item.settings.output_directory}
      params:
      - proteomics.organize_samples.default_settings
      - proteomics.organize_samples.stages.${key}.settings
    foreach: ${proteomics.organize_samples.stages}
  proteomics_prefiltering_pca:
    do:
      cmd: ./docker-wrapper.sh ./src/proteomics/20-prefiltering_pca.R --dataset-name
        ${key}
      deps:
      - ./src/proteomics/20-prefiltering_pca.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/get_top_n_variance.R
      - ./src/shared/R-helpers/pc_scores_loadings_plot.R
      - ./src/shared/R-helpers/pca_fit.R
      - ${item.settings.cohort}
      - ${item.settings.input_directory}
      outs:
      - ${item.settings.output_directory}
      params:
      - proteomics.prefiltering_pca.default_settings
      - proteomics.prefiltering_pca.stages.${key}.settings
    foreach: ${proteomics.prefiltering_pca.stages}
  proteomics_revigo:
    do:
      cmd: ./docker-wrapper.sh python ./src/shared/REVIGO/revigo_restful_advanced.py
        --dataset_name ${key} --omics_type proteomics
      deps:
      - ./src/shared/REVIGO/revigo_restful_advanced.py
      - ./datasets/consortium/${item.settings.biological_model}/02_organized_data/proteomics/gsea_enrichment
      outs:
      - ${item.settings.output_directory}
      params:
      - proteomics.revigo.stages.${key}.settings
    foreach: ${proteomics.revigo.stages}
  proteomics_string_ppi:
    do:
      cmd: ./docker-wrapper.sh ./src/proteomics/45-string_ppi.R --dataset-name ${key}
      deps:
      - ./src/proteomics/45-string_ppi.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ${item.settings.uniprot_to_string}
      - ${item.settings.de_result_thresholds_rds}
      - ${item.settings.string_ppi_file}
      outs:
      - ${item.settings.output_directory}
      params:
      - proteomics.string_ppi.default_settings
      - proteomics.string_ppi.stages.${key}.settings
    foreach: ${proteomics.string_ppi.stages}
  proteomics_uniprot_ensemble_mappings:
    cmd: ./src/proteomics/44-download-uniprot-to-gene-mappings.sh
    deps:
    - ./src/proteomics/44-download-uniprot-to-gene-mappings.sh
    outs:
    - database/uniprot/uniprot_MOUSE_10090_idmapping_selected.tab.gz
    - database/uniprot/uniprot_HUMAN_9606_idmapping_selected.tab.gz
  rnaseq_deg:
    do:
      cmd: ./docker-wrapper.sh ./src/rnaseq/30-deg.R --dataset-name ${key}
      deps:
      - ./src/rnaseq/30-deg.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/cohort_to_factors.R
      - ./src/shared/R-helpers/deseq2_analysis.R
      - ${item.settings.cohort}
      - ${item.settings.prefiltpca_dir}
      outs:
      - ${item.settings.output_directory}
      params:
      - rnaseq.deg.default_settings
      - rnaseq.deg.stages.${key}.settings
    foreach: ${rnaseq.deg.stages}
  rnaseq_deg_count:
    cmd: ./docker-wrapper.sh python ./src/rnaseq/46-get_deg_counts.py
    deps:
    - ./src/rnaseq/46-get_deg_counts.py
    - ${rnaseq.deg_count.sod1_female}
    - ${rnaseq.deg_count.tdp43_female}
    - ${rnaseq.deg_count.c9_female}
    - ${rnaseq.deg_count.human_female}
    - ${rnaseq.deg_count.fus_female}
    - ${rnaseq.deg_count.sod1_male}
    - ${rnaseq.deg_count.tdp43_male}
    - ${rnaseq.deg_count.c9_male}
    - ${rnaseq.deg_count.human_male}
    - ${rnaseq.deg_count.fus_male}
    metrics:
    - results/integration/rnaseq/deg_counts.yaml
  rnaseq_deg_digestion:
    do:
      cmd: ./docker-wrapper.sh ./src/rnaseq/40-deg-digestion.R --dataset-name ${key}
      deps:
      - ./src/rnaseq/40-deg-digestion.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/remove_ensembl_version.R
      - ./src/shared/R-helpers/create_volcano_plot.R
      - ./src/shared/R-helpers/memoise_decorator.R
      - ${item.settings.deg_dir}
      - ${item.settings.prefiltpca_dir}
      outs:
      - ${item.settings.output_directory}
      params:
      - rnaseq.deg_digestion.default_settings
      - rnaseq.deg_digestion.stages.${key}.settings
    foreach: ${rnaseq.deg_digestion.stages}
  rnaseq_download_refs:
    cmd: ./src/rnaseq/01-download-alignment-refs.sh
    outs:
    - database/align-references/hsapiens/GRCh38.p13.genome.fa.gz
    - database/align-references/hsapiens/GRCh38.primary_assembly.genome.fa.gz
    - database/align-references/hsapiens/gencode.v37.transcripts.fa.gz
    - database/align-references/hsapiens/gencode.v37.annotation.gtf.gz
    - database/align-references/mmusculus/GRCm39.genome.fa.gz
    - database/align-references/mmusculus/GRCm39.primary_assembly.genome.fa.gz
    - database/align-references/mmusculus/gencode.vM26.transcripts.fa.gz
    - database/align-references/mmusculus/gencode.vM26.annotation.gtf.gz
  rnaseq_gene_enrichment:
    do:
      cmd: ./docker-wrapper.sh ./src/rnaseq/45-gsea-enrichment.R --dataset-name ${key}
      deps:
      - ./src/rnaseq/45-gsea-enrichment.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/remove_ensembl_version.R
      - ./src/shared/R-helpers/gseGO_memoise.R
      - ./src/shared/R-helpers/memoise_decorator.R
      - ${item.settings.deg_dir}
      outs:
      - ${item.settings.output_directory}
      params:
      - rnaseq.gene_enrichment.default_settings
      - rnaseq.gene_enrichment.stages.${key}.settings
    foreach: ${rnaseq.gene_enrichment.stages}
  rnaseq_gene_gene_correlation:
    do:
      cmd: ./docker-wrapper.sh ./src/rnaseq/50-gene-gene-correlation.R --dataset-name
        ${key}
      deps:
      - ./src/rnaseq/50-gene-gene-correlation.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/remove_ensembl_version.R
      - ./src/shared/R-helpers/gseGO_memoise.R
      - ./src/shared/R-helpers/memoise_decorator.R
      - ${item.settings.cohort}
      - ${item.settings.deg_dir}
      - ${item.settings.prefiltpca_dir}
      outs:
      - ${item.settings.output_directory}
      params:
      - rnaseq.gene_gene_correlation.default_settings
      - rnaseq.gene_gene_correlation.stages.${key}.settings
    foreach: ${rnaseq.gene_gene_correlation.stages}
  rnaseq_genetonic:
    do:
      cmd: ./docker-wrapper.sh ./src/rnaseq/51-genetonic.R --dataset-name ${key}
      deps:
      - ./src/rnaseq/51-genetonic.R
      - ${item.settings.inputs_female}
      - ${item.settings.inputs_male}
      - ${item.settings.annotation}
      outs:
      - ${item.settings.output_directory}
      params:
      - rnaseq.genetonic.default_settings
      - rnaseq.genetonic.stages.${key}.settings
    foreach: ${rnaseq.genetonic.stages}
  rnaseq_gofigure:
    do:
      cmd: ./docker-wrapper.sh python3 src/shared/GoFigure/run_gofigure.py --key rnaseq
        --method gofigure --stage ${key}
      deps:
      - ${item.inputs}
      - src/shared/GoFigure/gofigure.py
      - src/shared/GoFigure/run_gofigure.py
      - src/shared/GoFigure/data/
      outs:
      - ${item.outputs}
      params:
      - rnaseq.gofigure.stages.${key}.settings.level
      - rnaseq.gofigure.stages.${key}.settings.commandline
    foreach: ${rnaseq.gofigure.stages}
  rnaseq_merge_raw:
    do:
      cmd: ./src/rnaseq/merge_inputs.py --stage ${key}
      deps:
      - ./src/rnaseq/merge_inputs.py
      - ${item.inputs.new}
      - ${item.inputs.old}
      outs:
      - ${item.output}
    foreach: ${rnaseq.rnaseq_merge.stages}
  rnaseq_nextflow:
    do:
      cmd: ./src/rnaseq/10-nextflow.py --dataset-name ${key}
      deps:
      - ./src/rnaseq/10-nextflow.py
      - ${item.settings.input_directory}
      - ${item.settings.cohort}
      - ${item.settings.fasta}
      - ${item.settings.gtf}
      outs:
      - ${item.settings.output_directory}/samplesheet.csv
      - ${item.settings.output_directory}/nextflow_ids_to_samples.csv
      - ${item.settings.output_directory}/results/
      params:
      - rnaseq.nextflow.default_settings
      - rnaseq.nextflow.stages.${key}.settings
    foreach: ${rnaseq.nextflow.stages}
  rnaseq_prefiltering_pca:
    do:
      cmd: ./docker-wrapper.sh ./src/rnaseq/20-prefiltering-pca.R --dataset-name ${key}
      deps:
      - ./src/rnaseq/20-prefiltering-pca.R
      - ./src/shared/R-helpers/cohort_to_factors.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/get_top_n_variance.R
      - ./src/shared/R-helpers/pc_scores_loadings_plot.R
      - ./src/shared/R-helpers/pca_fit.R
      - ${item.settings.cohort}
      - ${item.settings.nfid_to_sample_id}
      - ${item.settings.counts}
      outs:
      - ${item.settings.output_directory}
      params:
      - rnaseq.prefiltering_pca.default_settings
      - rnaseq.prefiltering_pca.stages.${key}.settings
    foreach: ${rnaseq.prefiltering_pca.stages}
  rnaseq_proteomics_intersection:
    do:
      cmd: ./docker-wrapper.sh ./src/integration/21-rnaseq-proteomics-intersection.R
        --dataset-name ${key}
      deps:
      - ./src/integration/21-rnaseq-proteomics-intersection.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/remove_ensembl_version.R
      - ${item.settings.proteomics_de_results}
      - ${item.settings.protein_group_to_proteins}
      - ${item.settings.rnaseq_de_results}
      - ${item.settings.uniprot_to_ensembl}
      outs:
      - ${item.settings.output_directory}
      params:
      - integration.rnaseq_proteomics_intersection.default_settings
      - integration.rnaseq_proteomics_intersection.stages.${key}.settings
    foreach: ${integration.rnaseq_proteomics_intersection.stages}
  rnaseq_revigo:
    do:
      cmd: ./docker-wrapper.sh python ./src/shared/REVIGO/revigo_restful_advanced.py
        --dataset_name ${key} --omics_type rnaseq
      deps:
      - ./src/shared/REVIGO/revigo_restful_advanced.py
      - ./datasets/consortium/${item.settings.biological_model}/02_organized_data/rnaseq/gene-enrichment
      outs:
      - ${item.settings.output_directory}
      params:
      - rnaseq.revigo.stages.${key}.settings
    foreach: ${rnaseq.revigo.stages}
  rnaseq_srna_intersection:
    do:
      cmd: ./docker-wrapper.sh ./src/integration/20-rnaseq-srna-intersection.R --dataset-name
        ${key}
      deps:
      - ./src/integration/20-rnaseq-srna-intersection.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/remove_ensembl_version.R
      - ${item.settings.rnaseq_prefiltpca_dir}/ENSG_to_symbol.rds
      - ${item.settings.rnaseq_de_digested_dir}/de_tables/de_result_thresholds.rds
      - ${item.settings.srna_deg_digestion_dir}/de_results_with_targets.rds
      outs:
      - ${item.settings.output_directory}
      params:
      - integration.rnaseq_srna_intersection.default_settings
      - integration.rnaseq_srna_intersection.stages.${key}.settings
    foreach: ${integration.rnaseq_srna_intersection.stages}
  splicing_analysis:
    do:
      cmd: ./docker-wrapper.sh ./src/rnaseq/DTU_Analysis/DTU.R --dataset-name ${key}
      deps:
      - ./src/rnaseq/DTU_Analysis/DTU.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/rnaseq/DTU_Analysis/DEXSeq_DTU_analysis.R
      - ./src/rnaseq/DTU_Analysis/DRIMSeq_DTU_analysis.R
      - ./src/rnaseq/DTU_Analysis/stageR_DTU_significanceTesting.R
      - ${item.settings.cohort}
      - ${item.settings.input_directory}
      - ${item.settings.gtf}
      - ${item.settings.nfs_to_sample_id}
      outs:
      - ${item.settings.output_directory}
      params:
      - splicing_analysis.dtu.stages.${key}.settings
    foreach: ${splicing_analysis.dtu.stages}
  sra_fastq_dump:
    cmd: mkdir -p datasets/consortium/00_download/fastq && MX_DOCKERIMAGE="ncbi/sra-tools"
      ./docker-wrapper.sh sh ./src/shared/sra_fastqdump.sh
    deps:
    - ./src/shared/sra_fastqdump.sh
    - datasets/consortium/00_download/SRR_Acc_List.txt
    - datasets/consortium/00_download/prefetch
    frozen: true
    outs:
    - datasets/consortium/00_download/fastq:
        cache: false
  sra_organize:
    cmd: ./docker-wrapper.sh python3 ./src/shared/sra_organize.py
    deps:
    - ./src/shared/sra_organize.py
    - datasets/consortium/00_download/SraRunTable.txt
    - datasets/consortium/00_download/fastq
    - datasets/consortium/00_download/GSE234246-GPL17021_series_matrix.txt.gz
    - datasets/consortium/00_download/GSE234246-GPL24247_series_matrix.txt.gz
    outs:
    - datasets/consortium/FUS-mouse/01_received_data/cohort/sample_annotations.csv
    - datasets/consortium/FUS-mouse/01_received_data/srna/
    - datasets/consortium/FUS-mouse/01_received_data/rnaseq/
    - datasets/consortium/C9orf72-mouse/01_received_data/cohort/sample_annotations.csv
    - datasets/consortium/C9orf72-mouse/01_received_data/srna/
    - datasets/consortium/C9orf72-mouse/01_received_data/rnaseq/
    - datasets/consortium/SOD1-mouse/01_received_data/cohort/sample_annotations.csv
    - datasets/consortium/SOD1-mouse/01_received_data/srna/
    - datasets/consortium/SOD1-mouse/01_received_data/rnaseq/
    - datasets/consortium/TDP43-mouse/01_received_data/cohort/sample_annotations.csv
    - datasets/consortium/TDP43-mouse/01_received_data/srna/
    - datasets/consortium/TDP43-mouse/01_received_data/rnaseq/
  sra_prefetch:
    cmd: mkdir -p datasets/consortium/00_download/prefetch && MX_DOCKERIMAGE="ncbi/sra-tools"
      ./docker-wrapper.sh sh ./src/shared/sra_download.sh
    deps:
    - ./src/shared/sra_download.sh
    - datasets/consortium/00_download/SRR_Acc_List.txt
    frozen: true
    outs:
    - datasets/consortium/00_download/prefetch:
        cache: false
        persist: true
  srna_deg:
    do:
      cmd: ./docker-wrapper.sh ./src/srna/30-deg.R --dataset-name ${key}
      deps:
      - ./src/srna/30-deg.R
      - ./src/shared/R-helpers/cohort_to_factors.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/deseq2_analysis.R
      - ${item.settings.cohort}
      - ${item.settings.prefilt_dir}/to_keep_mirna_mature.rds
      - ${item.settings.prefilt_dir}/mature_counts_mat.rds
      - ${item.settings.prefilt_dir}/to_keep_mirna_hairpin.rds
      - ${item.settings.prefilt_dir}/hairpin_counts_mat.rds
      outs:
      - ${item.settings.output_directory}
      params:
      - srna.deg.default_settings
      - srna.deg.stages.${key}.settings
    foreach: ${srna.deg.stages}
  srna_deg_digestion:
    do:
      cmd: ./docker-wrapper.sh ./src/srna/40-deg_digestion.R --dataset-name ${key}
      deps:
      - ./src/srna/40-deg_digestion.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ${item.settings.deg_dir}
      - ${item.settings.miRDB_prediction}
      - ${item.settings.refseq_mrna_to_ensembl_gene_id}
      outs:
      - ${item.settings.output_directory}
      params:
      - srna.deg_digestion.default_settings
      - srna.deg_digestion.stages.${key}.settings
    foreach: ${srna.deg_digestion.stages}
  srna_download_gtf:
    cmd: ./src/srna/05-download-mirbase.sh
    deps:
    - ./src/srna/05-download-mirbase.sh
    outs:
    - database/mirbase/mmusculus/mirbase_mmu.gff3
    - database/mirbase/hsapiens/mirbase_hsa.gff3
  srna_download_miRDB_targets:
    cmd: ./src/srna/39-download-mirDB.sh
    outs:
    - database/miRDB/miRDB_v6.0_prediction_result.txt.gz
  srna_download_refseq_mrna_to_ensembl_human:
    cmd: ./docker-wrapper.sh ./src/srna/39-download-refseqmrna-to-ensembl-human.R
    deps:
    - ./src/srna/39-download-refseqmrna-to-ensembl-human.R
    outs:
    - database/biomaRt/refseq_mrna_to_ensembl_gene_id_human.csv
  srna_download_refseq_mrna_to_ensembl_mouse:
    cmd: ./docker-wrapper.sh ./src/srna/39-download-refseqmrna-to-ensembl-mouse.R
    deps:
    - ./src/srna/39-download-refseqmrna-to-ensembl-mouse.R
    outs:
    - database/biomaRt/refseq_mrna_to_ensembl_gene_id_mouse.csv
  srna_nextflow:
    do:
      cmd: ./src/srna/15-nextflow.py --dataset-name ${key}
      deps:
      - ./src/srna/15-nextflow.py
      - ${item.settings.input_directory}
      - ${item.settings.mirna_gtf}
      outs:
      - ${item.settings.output_directory}/results
      params:
      - srna.nextflow.default_settings
      - srna.nextflow.stages.${key}.settings
    foreach: ${srna.nextflow.stages}
  srna_organize_samples:
    do:
      cmd: ./src/srna/10-organize_samples.py --dataset-name ${key}
      deps:
      - ./src/srna/10-organize_samples.py
      - ${item.settings.input_directory}
      outs:
      - ${item.settings.output_directory}
      params:
      - srna.organize_samples.default_settings
      - srna.organize_samples.stages.${key}.settings
    foreach: ${srna.organize_samples.stages}
  srna_prefiltering_pca:
    do:
      cmd: ./docker-wrapper.sh ./src/srna/20-prefiltering_pca.R --dataset-name ${key}
      deps:
      - ./src/srna/20-prefiltering_pca.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/cohort_to_factors.R
      - ./src/shared/R-helpers/get_args.R
      - ./src/shared/R-helpers/update_list.R
      - ./src/shared/R-helpers/get_settings.R
      - ./src/shared/R-helpers/get_top_n_variance.R
      - ./src/shared/R-helpers/pc_scores_loadings_plot.R
      - ./src/shared/R-helpers/pca_fit.R
      - ${item.settings.cohort}
      - ${item.settings.input_directory}/results
      outs:
      - ${item.settings.output_directory}
      params:
      - srna.prefiltering_pca.default_settings
      - srna.prefiltering_pca.stages.${key}.settings
    foreach: ${srna.prefiltering_pca.stages}
  wgcna_graph:
    do:
      cmd: ./docker-wrapper.sh python3 src/shared/create_WGCNA_graph.py --stage ${key}
      deps:
      - src/shared/create_WGCNA_graph.py
      - ${item.inputs}
      outs:
      - ${item.outputs}
      params:
      - WGCNA.graph.stages.${key}.settings
      - WGCNA.graph.default_settings
    foreach: ${WGCNA.graph.stages}
  wgcna_graph_filter:
    do:
      cmd: ./docker-wrapper.sh python3 src/shared/filter_WGCNA_graph.py --stage ${key}
      deps:
      - src/shared/filter_WGCNA_graph.py
      - ${item.inputs}
      outs:
      - ${item.outputs}/filtered.gml
      - ${item.outputs}/layout.npz
      params:
      - WGCNA.graph_filter.stages.${key}.settings
      - WGCNA.graph_filter.default_settings
    foreach: ${WGCNA.graph_filter.stages}
  wgcna_graph_plot_proteomics:
    do:
      cmd: ./docker-wrapper.sh python3 src/shared/plot_WGCNA_graph.py --stage ${key}
        --omic proteomics
      deps:
      - src/shared/plot_WGCNA_graph.py
      - ${item.inputs.graph}
      - ${item.inputs.layout}
      - ${item.inputs.modules}
      - ${item.inputs.celltype_marker}
      - ${item.inputs.deg_female}
      - ${item.inputs.deg_male}
      - ${item.inputs.deg_full_female}
      - ${item.inputs.deg_full_male}
      - ${item.inputs.uniprotmapping}
      - ${item.inputs.ensemblmapping}
      outs:
      - ${item.outputs}/graph_module.pdf
      - ${item.outputs}/graph_celltype.pdf
      - ${item.outputs}/graph_degs.pdf
      - ${item.outputs}/graph_deg_foldchange.pdf
      params:
      - WGCNA.graph_plot.proteomics.stages.${key}.settings
      - WGCNA.graph_plot.default_settings
    foreach: ${WGCNA.graph_plot.proteomics.stages}
  wgcna_graph_plot_rnaseq:
    do:
      cmd: ./docker-wrapper.sh python3 src/shared/plot_WGCNA_graph.py --stage ${key}
        --omic rnaseq
      deps:
      - src/shared/plot_WGCNA_graph.py
      - ${item.inputs.graph}
      - ${item.inputs.layout}
      - ${item.inputs.modules}
      - ${item.inputs.celltype_marker}
      - ${item.inputs.deg_female}
      - ${item.inputs.deg_male}
      - ${item.inputs.deg_full_female}
      - ${item.inputs.deg_full_male}
      outs:
      - ${item.outputs}/graph_module.pdf
      - ${item.outputs}/graph_celltype.pdf
      - ${item.outputs}/graph_degs.pdf
      - ${item.outputs}/graph_deg_foldchange.pdf
      params:
      - WGCNA.graph_plot.rnaseq.stages.${key}.settings
      - WGCNA.graph_plot.default_settings
    foreach: ${WGCNA.graph_plot.rnaseq.stages}
  wgcna_moduleUpset:
    cmd: ./docker-wrapper.sh Rscript src/shared/WGCNA/moduleUpset.r
    deps:
    - src/shared/WGCNA/moduleUpset.r
    - ${WGCNA.upset.stages.sod1}
    - ${WGCNA.upset.stages.c9orf72}
    - ${WGCNA.upset.stages.fus}
    - ${WGCNA.upset.stages.tdp43}
    outs:
    - ${WGCNA.upset.out_dir}
    params:
    - WGCNA.upset.nintersects
    - WGCNA.upset.order_by
    - WGCNA.upset.matrix_plot_ratio
    - WGCNA.upset.main_bar_plot_ratio
    - WGCNA.upset.text_scale
    - WGCNA.upset.png_width
    - WGCNA.upset.png_height
    - WGCNA.upset.png_res
    - WGCNA.upset.out_dir
    - WGCNA.upset.stages.sod1
    - WGCNA.upset.stages.c9orf72
    - WGCNA.upset.stages.fus
    - WGCNA.upset.stages.tdp43
  wgcna_proteomics:
    do:
      cmd: ./docker-wrapper.sh Rscript src/shared/WGCNA/perform_WGCNA_protein.R --dataset-name
        ${key}
      deps:
      - src/shared/WGCNA/perform_WGCNA_protein.R
      - src/shared/WGCNA/perform_WGCNA_functions.R
      - src/shared/WGCNA/enrichment_WGCNA_functions.R
      - ${item.input_file}
      - ${item.annotations}
      - ${item.uniprot_to_ensembl}
      - ${item.de_dir}
      outs:
      - ${item.output_dir}
      params:
      - WGCNA.proteomics.stages.${key}
    foreach: ${WGCNA.proteomics.stages}
  wgcna_rnaseq:
    do:
      cmd: ./docker-wrapper.sh Rscript src/rnaseq/WGCNA.r --dataset-name ${key}
      deps:
      - src/rnaseq/WGCNA.r
      - ${item.input_file}
      - ${item.annotations}
      - ${item.ensembl_to_symbol}
      - ${item.de_dir}
      outs:
      - ${item.output_dir}
      params:
      - WGCNA.rnaseq.stages.${key}.organism
      - WGCNA.rnaseq.stages.${key}.selection
      - WGCNA.rnaseq.stages.${key}.softPower
      - WGCNA.rnaseq.stages.${key}.MEDissThres
      - WGCNA.rnaseq.stages.${key}.moduleSelectionThreshold
    foreach: ${WGCNA.rnaseq.stages}
